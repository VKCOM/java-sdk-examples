# Java SDK Examples

В этом репозитории собраны несколько небольших и простых примеров использования Java SDK ВКонтакте для демонстрации успешного взаимодействия.
Представлены несколько кейсов:  
- Example Echo Bot - пример простейшего бота, который пишет в личные сообщения описание Callback и LongPoll событий, происходящих с Вашим сообществом
- Взаимодействие с API через __Токен сообщества__;
- Взаимодействие с API через __Сервисный токен__;
- Взаимодействие с API через __Токен пользователя__, включая получение пользовательского `access_token`.

Для взаимодействия используется публичная версия `1.0.16` [VK Java SDK](https://github.com/VKCOM/vk-java-sdk).

## Prerequisites
1. Необходимо наличие собственного приложения, которое можно создать на [главной странице VK для разработчиков](https://dev.vk.com/).  
Для представленных кейсов достаточно Standalone-приложения.
2. После регистрации собственного приложения необходимо достать сервисный ключ доступа ([Инструкция](https://dev.vk.com/api/access-token/getting-started#Сервисный%20ключ%20доступа)).  
Полученный ключ, а также идентификатор приложения, необходимо поместить в поля `app.access.token` и `app.id` соответственно.
3. Далее необходимо создать собственную группу ВКонтакте и получить её ключ доступа ([Инструкция](https://dev.vk.com/api/access-token/getting-started#Ключ%20доступа%20сообщества)).  
Полученный ключ, а также идентификатор группы, необходимо поместить в поля `group.token` и `group.id` соответственно.
4. Затем необходимо получить ключ доступа пользователя ([Инструкция](https://dev.vk.com/api/access-token/getting-started#Ключ%20доступа%20пользователя)).  
Полученный ключ, а также идентификатор пользователя, необходимо поместить в поля `user.token` и `user.id` соответственно.

## Example echo bot
Для запуска бота необходимо заполнить поле `bot.echo.user.id` - идентификатор пользователя, который подписан на Ваше созданное сообщество `group.id`. Именно он будет получать сообщения с логами происходящий Callback и LongPoll событий. 

Дополнительно выберите типы событий, которые Вы хотите логировать. Сделать это можно во вкладках Callback API и LongPoll API рядом с ключами доступа приложения в разделе "Типы событий".
Добавьте обработку выбранных типов событий в классе `examples.bot.LongPollHandler` аналогично тому, что уже имеется.

Запустите бота и выполняйте выбранные ранее действия, бот будет присылать в личные сообщения описания выбранных событий.

## Ключ доступа сообщества
Для работы с ключом доступа сообщества уже все готово!  

В качестве примера реализованы два метода: добавление под постом `group.post.id` (заполните это поле) комментария от имени созданного ранее сообщества `group.id`, а затем закрытие комментариев под этим постом.

## Сервисный ключ доступа
Для работы с сервисным ключом доступа уже все готово!

В качестве примера реализованы два метода: получение недавних 10 постов со страницы и описание профиля пользователя `service.user.id` (заполните это поле).

## Ключ доступа пользователя
Для работы с пользовательским ключом доступа уже все готово!

В качестве примера реализованы два метода: добавление небольшого поста на стене сообщества `group.id` и добавления лайка на этот новый пост.

### Получение пользовательского ключа доступа
Для более удобного получения пользовательского ключа доступа можно воспользоваться классом `examples.user.UserAccessTokenProvider`, который реализует Implicit Flow ([Подробнее](https://dev.vk.com/ru/api/access-token/implicit-flow-user)).  
Сконфигурируйте тот набор доступов, который Вам необходим. Подбронее про набор доступов можно прочитать [здесь](https://dev.vk.com/reference/access-rights).
После выдачи доступов приложению и редиректу на страницу https://oauth.vk.com/blank.html перенесите из адреса `access_token` в поле `user.token`.

При желании можно добавить прослушивание конкретного адреса и порта на Вашем сервере и автоматически подхватывать `access_token` - в этом случае не забудьте поменять `REDIRECT_URI` на необходимое Вам значение.